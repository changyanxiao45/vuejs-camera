(function(e){function t(t){for(var n,o,s=t[0],c=t[1],d=t[2],l=0,h=[];l<s.length;l++)o=s[l],i[o]&&h.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,d||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},i={1:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/vuejs-camera/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=c;a.push([1,0]),r()})({1:function(e,t,r){e.exports=r("Vtdi")},Vtdi:function(e,t,r){"use strict";r.r(t);r("VRzm");var n=r("Kw5r"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("vue-camera")},a=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"wrapper",staticClass:"camera"},[r("div",{staticClass:"camera-wrapper"},[r("video",{directives:[{name:"show",rawName:"v-show",value:!e.blob||"video"===e.capture&&e.isAlreadyRecorded||"photo"!==e.capture&&!e.isAlreadyRecorded,expression:"!blob || (capture === 'video' && isAlreadyRecorded) || (capture !== 'photo' && !isAlreadyRecorded)"}],ref:"camera",attrs:{id:"preview",width:"100%",height:"auto",autoPlay:""}}),"photo"===e.capture?r("img",{directives:[{name:"show",rawName:"v-show",value:e.blob,expression:"blob"}],ref:"photo",attrs:{alt:"photo",width:"100%",height:"auto"}}):e._e()]),!e.devices.length||e.isRecording||e.isAlreadyRecorded?e._e():r("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],attrs:{id:"camera-select"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selected=t.target.multiple?r:r[0]},e.cameraChanged]}},e._l(e.devices,function(t,n){return r("option",{key:n,domProps:{value:t}},[e._v(e._s(t.label||t.kind))])})),e.isRecording?r("div",{staticClass:"counter"},[e._t("counter",[r("div",{staticClass:"content"},[r("i",{staticClass:"fa fa-circle",staticStyle:{"font-size":"0.5rem"},attrs:{"aria-hidden":"true"}}),e._v("\n        "+e._s(e.recordingTime)+"\n      ")])])],2):e._e(),r("div",{staticClass:"buttons-wrapper"},[e.isRecording||e.isAlreadyRecorded?e._e():r("div",{staticClass:"record-button",on:{click:e.action}},[r("i",{staticClass:"fa fa-camera",attrs:{"aria-hidden":"true"}})]),e.isRecording?r("div",{staticClass:"record-button",on:{click:e.stopRecording}},[r("i",{staticClass:"fa fa-stop",attrs:{"aria-hidden":"true"}})]):e._e(),r("div",{class:e.onReadyButtonsClass},[!e.isRecording&&e.isAlreadyRecorded?r("div",{staticClass:"reset-button",class:{"capture-photo":"photo"===e.capture},on:{click:e.resetStream}},[r("i",{staticClass:"fa fa-repeat",attrs:{"aria-hidden":"true"}})]):e._e(),!e.isRecording&&e.isAlreadyRecorded?r("div",{staticClass:"upload-button",class:{"capture-photo":"photo"===e.capture},on:{click:e.onReady}},[r("i",{staticClass:"fa fa-cloud-upload",attrs:{"aria-hidden":"true"}})]):e._e()])])])},s=[],c=(r("a1Th"),{name:"camera-component",props:{capture:{type:String,default:"video"}},computed:{recordingTime:function(){var e=Math.floor(this.counter/60),t=this.counter%60<10?"0".concat(this.counter%60):this.counter%60;return e+":"+t},onReadyButtonsClass:function(){var e="on-ready-buttons";return"video"===this.capture?(this.paused&&(e+=" paused"),this.smallPreview&&(e+=" smallPreview")):e+=" capture-photo",e}},methods:{action:function(){var e={photo:this.takePhoto,video:this.startRecording},t=e[this.capture];t()},takePhoto:function(){var e=this;this.$emit("onPhoto");var t=this.$refs.photo;navigator.mediaDevices.getUserMedia(this.constraints).then(function(r){var n=r.getVideoTracks()[0],i=new ImageCapture(n);i.takePhoto().then(function(r){e.blob=r,e.isAlreadyRecorded=!0,t.src=URL.createObjectURL(r),t.onload=function(){URL.revokeObjectURL(e.src)}})})},startRecording:function(){var e=this;this.$emit("onStart"),this.time();var t=document.getElementById("preview"),r=function(t){e.recordGlobal=new MediaRecorder(t),e.recordGlobal.start()};navigator.mediaDevices.getUserMedia(this.constraints).then(function(e){return t.setAttribute("autoplay",!0),t.removeAttribute("controls"),t.srcObject=e,t.captureStream=t.captureStream||t.mozCaptureStream,new Promise(function(e){t.onplaying=e,e()})}).then(function(){return r(t.captureStream())})},stopRecording:function(){var e=this;this.$emit("onStop"),this.isAlreadyRecorded=!0,this.paused=!0,this.clearInterval();var t=document.getElementById("preview"),r=[];"recording"===this.recordGlobal.state&&this.recordGlobal.stop(),this.recordGlobal.ondataavailable=function(n){r.push(n.data);var i=new Blob(r,{type:"video/webm"});e.blob=i,t.srcObject=null,t.src=URL.createObjectURL(i),t.removeAttribute("autoplay"),t.setAttribute("controls",!0)}},resetStream:function(){var e=this;this.$emit("onReset"),this.blob=null;var t=document.getElementById("preview");"photo"!==this.capture?navigator.mediaDevices.getUserMedia(this.constraints).then(function(r){t.setAttribute("autoplay",!0),t.removeAttribute("controls"),t.srcObject=r,t.captureStream=t.captureStream||t.mozCaptureStream,e.isAlreadyRecorded=!1}):this.isAlreadyRecorded=!1},onReady:function(){this.$emit("onReady",this.blob)},time:function(){var e=this;this.isRecording=!0,this.timeCounter=setInterval(function(){e.counter=e.counter+1},1e3)},clearInterval:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){clearInterval(this.timeCounter),this.isRecording=!1,this.counter=0,this.timeCounter=null}),onCancel:function(){this.$emit("onCancel")},cameraChanged:function(){this.$emit("onCameraChanged");var e=document.getElementById("preview"),t={};t.deviceId={exact:this.selected.deviceId},this.constraints={video:t,audio:!1},navigator.mediaDevices.getUserMedia(this.constraints).then(function(t){e.srcObject=t}).catch(function(e){return console.error(e)})},handleWindowResize:function(){this.smallPreview=this.$refs.wrapper.offsetWidth<740},handleOnPlay:function(){this.paused=!1,this.isAlreadyRecorded&&this.$emit("onPlay")},handleOnPause:function(){this.paused=!0,this.$emit("onPause")}},mounted:function(){var e=this,t=this.$refs.camera;window.addEventListener("resize",this.handleWindowResize),this.handleWindowResize(),t.addEventListener("play",this.handleOnPlay),t.addEventListener("pause",this.handleOnPause),this.constraints={video:!0};var r=function(t){e.devices=JSON.parse(JSON.stringify(t)).filter(function(e){return"videoinput"===e.kind}),e.selected=e.devices[0];var r={};r.deviceId={exact:e.selected.deviceId},e.constraints={video:r,audio:!1}};navigator.mediaDevices.getUserMedia(this.constraints).then(function(e){return t.srcObject=e,navigator.mediaDevices.enumerateDevices()}).then(r).catch(function(e){console.error(e)})},beforeDestroy:function(){var e=this.$refs.camera;window.removeEventListener("resize",this.handleWindowResize),e.removeEventListener("play",this.handleOnPlay),e.removeEventListener("pause",this.handleOnPause)},data:function(){return{paused:!1,smallPreview:!1,select:!1,blob:null,devices:[],constraints:{},selected:null,isRecording:!1,isAlreadyRecorded:!1,counter:0,timeCounter:null}}}),d=c,u=(r("sniE"),r("KHd+")),l=Object(u["a"])(d,o,s,!1,null,null,null),h=l.exports,p={components:{VueCamera:h}},v=p,f=Object(u["a"])(v,i,a,!1,null,null,null),m=f.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(m)}}).$mount("#app")},bB6O:function(e,t,r){},sniE:function(e,t,r){"use strict";var n=r("bB6O"),i=r.n(n);i.a}});
//# sourceMappingURL=app.a60f8911.js.map